#include "workoutplan.h"
#include <QMessageBox>

WorkoutPlan::WorkoutPlan(QWidget *parent) : QDialog(parent)
{
    setWindowTitle("Планы тренировок");
    resize(500, 400);

    QVBoxLayout *layout = new QVBoxLayout(this);

    // Выбор типа тренировки
    QComboBox *typeCombo = new QComboBox(this);
    typeCombo->addItems({"Зал", "Дома", "Улица"});

    // Выбор цели тренировки
    QComboBox *goalCombo = new QComboBox(this);
    goalCombo->addItems({"Похудение", "Набор массы", "Поддержание формы"});

    // Отображение плана тренировки
    QTextEdit *planDisplay = new QTextEdit(this);
    planDisplay->setReadOnly(true);

    // Кнопка генерации плана
    QPushButton *generateBtn = new QPushButton("Сгенерировать план", this);

    // Компоновка элементов
    layout->addWidget(typeCombo);
    layout->addWidget(goalCombo);
    layout->addWidget(planDisplay);
    layout->addWidget(generateBtn);

    // Обработка нажатия кнопки
    connect(generateBtn, &QPushButton::clicked, [=]() {
        QString workout = getWorkout(typeCombo->currentText(), goalCombo->currentText());
        planDisplay->setText(workout);
    });
}

void WorkoutPlan::showPlan()
{
    show();
}

QString WorkoutPlan::getWorkout(const QString &type, const QString &goal)
{
    QString plan = "План тренировки:\n";
    plan += "Тип: " + type + "\n";
    plan += "Цель: " + goal + "\n\n";

    if (goal == "Похудение") {
        if (type == "Зал") {
            plan += "1. Кардио на выбор (30 минут):\n";
            plan += "   - Беговая дорожка\n";
            plan += "   - Эллипс\n";
            plan += "   - Велотренажер\n";
            plan += "   - Гребной тренажер\n\n";

            plan += "2. Круговая тренировка (3 круга):\n";
            plan += "   - Приседания со штангой 15 повторений\n";
            plan += "   - Жим лежа 15 повторений\n";
            plan += "   - Тяга верхнего блока 15 повторений\n";
            plan += "   - Жим ногами 15 повторений\n";
            plan += "   - Разведение гантелей 15 повторений\n";
        }
        else if (type == "Дома") {
            plan += "1. Кардио (5 подходов по 1 минуте):\n";
            plan += "   - Прыжки на скакалке\n";
            plan += "   - Берпи\n";
            plan += "   - Альпинист\n\n";

            plan += "2. Круговая тренировка (4 круга):\n";
            plan += "   - Приседания с выпрыгиванием 20 повторений\n";
            plan += "   - Отжимания 15 повторений\n";
            plan += "   - Выпады назад 15 повторений (на каждую ногу)\n";
            plan += "   - Планка 1 минута\n";
        }
        else { // Улица
            plan += "1. Кардио (30 минут):\n";
            plan += "   - Интервальный бег\n";
            plan += "   - Спринты\n";
            plan += "   - Бег в гору\n\n";

            plan += "2. Упражнения:\n";
            plan += "   - Подтягивания 4 подхода на максимум\n";
            plan += "   - Отжимания на брусьях 4 подхода по 15 повторений\n";
            plan += "   - Приседания с прыжком 3 подхода по 20 повторений\n";
            plan += "   - Прыжки на тумбу 3 подхода по 15 повторений\n";
        }
    }
    else if (goal == "Набор массы") {
        plan += "1. Базовые упражнения (4 подхода по 8-12 повторений):\n";

        if (type == "Зал") {
            plan += "   - Становая тяга\n";
            plan += "   - Жим штанги лежа\n";
            plan += "   - Приседания со штангой\n";
            plan += "   - Тяга штанги в наклоне\n";
            plan += "   - Армейский жим\n";
        }
        else if (type == "Дома") {
            plan += "   - Приседания с утяжелением\n";
            plan += "   - Отжимания с утяжелением\n";
            plan += "   - Подтягивания с утяжелением\n";
            plan += "   - Болгарские выпады с весом\n";
            plan += "   - Тяга самодельного веса\n";
        }
        else { // Улица
            plan += "   - Подтягивания с дополнительным весом\n";
            plan += "   - Отжимания на брусьях с весом\n";
            plan += "   - Приседания с напарником на плечах\n";
            plan += "   - Выпады с утяжелением\n";
            plan += "   - Подъемы на скамью с весом\n";
        }

        plan += "\n2. Изолирующие упражнения (3 подхода по 10-15 повторений):\n";
        if (type == "Зал") {
            plan += "   - Подъемы на бицепс\n";
            plan += "   - Разгибания на трицепс\n";
            plan += "   - Подъемы на носки\n";
            plan += "   - Скручивания с весом\n";
        }
        else {
            plan += "   - Сгибания рук с утяжелением\n";
            plan += "   - Отжимания узким хватом\n";
            plan += "   - Подъемы на носочки с утяжелением\n";
            plan += "   - Скручивания с дополнительным весом\n";
        }
    }
    else { // Поддержание формы
        plan += "1. Комбинированная тренировка (3 подхода по 12-15 повторений):\n";

        if (type == "Зал") {
            plan += "   - Приседания со штангой\n";
            plan += "   - Жим гантелей лежа\n";
            plan += "   - Тяга верхнего блока\n";
            plan += "   - Выпады с гантелями\n";
            plan += "   - Разведение гантелей\n";
        }
        else if (type == "Дома") {
            plan += "   - Приседания\n";
            plan += "   - Отжимания\n";
            plan += "   - Подтягивания (если есть турник)\n";
            plan += "   - Выпады\n";
            plan += "   - Планка (1-2 минуты)\n";
        }
        else { // Улица
            plan += "   - Приседания с прыжком\n";
            plan += "   - Отжимания на брусьях\n";
            plan += "   - Подтягивания\n";
            plan += "   - Выпады с прыжком\n";
            plan += "   - Планка с попеременным подъемом ног\n";
        }

        plan += "\n2. Кардио:\n";
        if (type == "Зал") {
            plan += "   - Беговая дорожка (20-30 минут)\n";
            plan += "   - Велотренажер (20-30 минут)\n";
        }
        else if (type == "Дома") {
            plan += "   - Прыжки на скакалке (10 минут)\n";
            plan += "   - Берпи (5 подходов по 1 минуте)\n";
        }
        else { // Улица
            plan += "   - Бег (20-30 минут)\n";
            plan += "   - Интервальные спринты (10 подходов по 100 метров)\n";
        }
    }

    return plan;  // Добавлен оператор возврата
}
